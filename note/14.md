# 迭代器

```rust
fn main() {
    let v = vec![1, 2, 3];
    let mut v_itr = v.iter();

    // 如果迭代器中有值，next返回Some(v)，否则返回None
    let num = v_itr.next();
    println!("{}", num.unwrap());

    let num = v_itr.next();
    println!("{}", num.unwrap());

    let num = v_itr.next();
    println!("{}", num.unwrap());

    let num = v_itr.next();
    // println!("{}", num.unwrap());  // panicked

    // 使用迭代器遍历元素并不会消耗掉原来的Vector
    println!("{}", v[0]);
    println!("{}", v[1]);
    println!("{}", v[2]);

    println!("***************************");
    let itr2 = v.iter();
    itr2.for_each(|x| println!("{}", x));

    // 原来vector的值还是在
    println!("{}", v[0]);
    println!("{}", v[1]);
    println!("{}", v[2]);

    println!("***************************");

    for num in v {
        println!("{}", num);
    }
    // 直接在vector上遍历，vector中的元素就会被消耗掉
    // println!("{}", v[0]);
    // println!("{}", v[1]);
    // println!("{}", v[2]);
}
```

iter方法是创建 不可变引用的迭代器
into_iter方法创建的迭代器能获取Vector的所有权，并返回具有所有权的值。
```rust
fn main() {
    let v = vec![1, 2, 3];
    let mut v_itr = v.into_iter();
    v_itr.for_each(|x| println!("{}", x));

    // 原来的vector不能再用
    // println!("{}", v[0]); // Value used after being moved
}
```
iter_mut方法创建 可变引用的迭代器
```rust
fn main() {
    let mut v = vec![1, 2, 3];
    let mut v_itr = v.iter_mut();
    v_itr.for_each(|x| *x += 100);

    println!("{}", v[0]);   // 101
    println!("{}", v[1]);   // 102
    println!("{}", v[2]);   // 103
}
```