# 枚举

## 简单枚举

```rust
fn main() {
    println!("{}", Pet::Cat as u8);     // 0
    println!("{}", Pet::Dog as u8);     // 1
    println!("{}", Pet::Rabbit as u8);  // 2

    println!("{}", HttpStatus::Ok as u8);  // 200

    let status: HttpStatus = HttpStatus::get_http_status(200);
    println!("{}", status == HttpStatus::Ok);       // true

    status.test();
}

// 在内存中，枚举的各个值会存储为整数, 默认从0开始
enum Pet {
    Cat,     // 0
    Dog,     // 1
    Rabbit   // 2
}

// 也可以明确指定各个枚举项的值
#[derive(Debug, PartialEq)]
enum HttpStatus {
    Ok = 200,
    NotModified = 304,
    NotFound = 404
}

// 枚举可以有方法
impl HttpStatus {
    // 类型方法
    pub fn get_http_status(num_value: u16) -> HttpStatus {
        match num_value {
            200 => HttpStatus::Ok,
            304 => HttpStatus::NotModified,
            404 => HttpStatus::NotFound,
            _ => HttpStatus::Ok
        }
    }
    // 实例方法
    pub fn test(&self) {

    }
}
```

## 一个模具示例

```java
// Java Code
public enum TestEnum {

    One(1, "one"),
    Two(2, "two"),
    Three(3, "three");

    private int code;
    private String name;

    TestEnum(int code, String name) {
        this.code = code;
        this.name = name;
    }
}
```

用Rust实现与其匹配的模具如下：

```rust
#[derive(Debug, Clone, Copy)]
pub enum TestEnum {
    One,
    Two,
    Three,
}

impl TestEnum {
    pub fn code(&self) -> i32 {
        match self {
            TestEnum::One => 1,
            TestEnum::Two => 2,
            TestEnum::Three => 3,
        }
    }

    pub fn name(&self) -> &'static str {
        match self {
            TestEnum::One => "one",
            TestEnum::Two => "two",
            TestEnum::Three => "three",
        }
    }

    // 可能返回“Null”的方法的返回值类型是Option
    pub fn from_code(code: i32) -> Option<Self> {
        match code {
            1 => Some(TestEnum::One),
            2 => Some(TestEnum::Two),
            3 => Some(TestEnum::Three),
            _ => None,
        }
    }
}

fn main() {
    let one = TestEnum::One;
    println!("One: code={}, name={}", one.code(), one.name());

    let two = TestEnum::Two;
    println!("Two: code={}, name={}", two.code(), two.name());

    let three = TestEnum::from_code(3);
    if let Some(enum_val) = three {
        println!("From code 3: {:?}, name={}", enum_val, enum_val.name());  // From code 3: Three, name=three
    }

    let invalid = TestEnum::from_code(4);
    println!("Invalid code 4: {:?}", invalid);  // Invalid code 4: None
}
```